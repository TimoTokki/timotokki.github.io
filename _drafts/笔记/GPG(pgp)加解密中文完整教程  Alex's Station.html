<html>
<head>
  <title>GPG(pgp)加解密中文完整教程 | Alex's Station</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/275193; Windows/6.3.9600;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="15012"/>
<h1>GPG(pgp)加解密中文完整教程 | Alex's Station</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2016/3/5 15:14</i></td></tr>
<tr><td><b>标签：</b></td><td><i>减藏</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.alexgao.com/2009/01/24/gpg/"><i>http://www.alexgao.com/2009/01/24/gpg/</i></a></td></tr>
</table>
</div>
<br/>

<div><span><br/><div style="font-size: 16px"><div style="outline:0px;font-size:100%;vertical-align:baseline;background:transparent;"><div style="outline:0px;font-size:12px;vertical-align:baseline;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/bg.png) 0px 56px repeat scroll rgb(250, 250, 250);font-family:'Microsoft Yahei', 微软雅黑, Arial;"><div style="outline:0px;font-size:100%;vertical-align:baseline;background:transparent;"><div style="outline:0px;font-size:100%;vertical-align:baseline;background:transparent;zoom:1;text-shadow:rgb(255, 255, 255) 1px 1px 0px;"><div style="outline:0px;font-size:100%;vertical-align:baseline;background:transparent;overflow:hidden;text-shadow:rgb(255, 255, 255) 1px 1px 0px;"><div style="outline:0px;vertical-align:baseline;background:transparent;font-size:13px;color:rgb(64, 64, 64);line-height:24px;"><div style="outline:0px;font-size:100%;vertical-align:baseline;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/defaultbg.png) repeat-y;overflow:hidden;"><div style="outline:0px;vertical-align:baseline;background:transparent;font-size:15px;line-height:28px;">
							<h2 style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;font-weight:400;clear:both;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">一、介绍</span></h2>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">我们都知道，互联网是不安全的，但其上所使用的大部分应用，如Web、Email等一般都只提供明文传输方式（用https、smtps等例外）。所以，当我们需要传输重要文件时，应该对当中的信息加密。非对称密码系统是其中一种常见的加密手段。而在基于PGP方式加密的中文介绍少之又少，所以萌生了写一个完整教程的想法，当然本文部分资料是我搜遍网络整理出来的，并不能保证百分之百的原创 <img src="GPG(pgp)加解密中文完整教程  Alex's Station_files/icon_razz.gif" type="image/gif" alt=":-P" height="15" style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;height:auto;max-width:614px;" width="15"/></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"></span></p>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">GnuPG 是一个用来进行非对称加密(PGP)的免费软件，简称GPG（是不是有的童鞋已经被PGP和GPG给搞昏了？ <img src="GPG(pgp)加解密中文完整教程  Alex's Station_files/icon_biggrin.gif" type="image/gif" alt=":grin:" height="15" style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;height:auto;max-width:614px;" width="15"/> ）。先说说什么是非对称加密。传统的加密手段往往是使用同一个密码进行加密和解密。例如你加密时用的密码是“abc”， 则解密时也要使用“abc”才行。这样就存在一个问题，你不能够把一段加密信息发送给你的朋友。试想，如果采用这种加密方式把信息发送给你的朋友时，你的 朋友必须要知道你的密码才能把你的信息解密出来。但你如何保证你的朋友是绝对可靠的呢？也就是说，如果你的朋友把你的密码告诉了别人，你的密码就不再安全 了。<br/> 非对称加密采用的是另一种思想。它会给你产生两个密钥，一个称为“公钥”，另一个称为“私钥”。公钥是可以公开的，你尽管把它传给别 人；私钥你一定要保管好不让其他任何人知道。当某人得到你的公钥后，他就可以给你发送加密信息了。具体来说，他把他要发给你的信息用你的公钥加密后发给 你，加密的信息只能用你的私钥去解密。这样，因为世界上除了你以外没有别人知道你的私钥，所以即使别人看到发送给你的加密信息他也无法解密，甚至连发送者 本人也不行。因为他不知道你的私钥。简单说来，就是用公钥去加密；用对应的私钥去解密。想给谁发送加密信息，首先要得到他的公钥。<br/> 支持非 对称加密的软件有多种，最著名的可能是美国的PGP了，不过它是个商业软件，价格不便宜。对于加密软件，我反对使用破解软件，因为如果信息需要加密的话， 肯定是非常重要的信息，破解软件无法保证加密的安全可靠。因此我建议使用免费开源的GnuPG软件进行信息的加密和解密。</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<h2 style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;font-weight:400;clear:both;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">二、使用:</span></h2>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff6600;"><strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">1.生成密钥对</strong></span><br/> 要使用GnuPG加密，首先需要创建密钥对，执行：</p>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"># gpg --gen-key<br/> gpg (GnuPG) 1.4.5; Copyright (C) 2006 Free Software Foundation, Inc.<br/> This program comes with ABSOLUTELY NO WARRANTY.<br/> This is free software, and you are welcome to redistribute it<br/>under certain conditions. See the file COPYING for details.<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;"></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">请选择您要使用的密钥种类：<br/> (1) DSA 和 ElGamal (默认)<br/> (2) DSA (仅用于签名)<br/> (5) RSA (仅用于签名)<br/> 您的选择？ 1  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←只有1可以用于加密，其他种类只能用于签名</span><br/> DSA 密钥对会有 1024 位。<br/> ELG-E 密钥长度应在 1024 位与 4096 位之间。<br/> 您想要用多大的密钥尺寸？(2048)  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←选择密码的位数，位数越大，越安全，但速度越慢</span><br/> 您所要求的密钥尺寸是 2048 位<br/> 请设定这把密钥的有效期限。<br/> 0 = 密钥永不过期<br/> &lt;n&gt;  = 密钥在 n 天后过期<br/> &lt;n&gt;w = 密钥在 n 周后过期<br/> &lt;n&gt;m = 密钥在 n 月后过期<br/> &lt;n&gt;y = 密钥在 n 年后过期<br/> 密钥的有效期限是？(0) 0  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←根据实际情况选择密钥期限</span><br/> 密钥永远不会过期<br/> 以上正确吗？(y/n)y  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←确认</span></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">您需要一个用户标识来辨识您的密钥；本软件会用真实姓名、注释和电子邮件地址组合<br/> 成用户标识，如下所示：<br/> “Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;”</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">真实姓名：Hyphen Wang  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←请填入真实姓名，后面会用到</span><br/> 电子邮件地址：gpgencrypt@linuxfly.org  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←邮件作为标记之一，不能重复</span><br/> 注释：Use for GPG Encrypt  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←仅是注释而已</span><br/> 您选定了这个用户标识：<br/> “Hyphen Wang (Use for GPG Encrypt) &lt;gpgencrypt@linuxfly.org&gt;”</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">更改姓名(N)、注释(C)、电子邮件地址(E)或确定(O)/退出(Q)？O  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←输入“O”确认</span><br/> 您需要一个密码来保护您的私钥。  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←输入两次用于访问私钥的密码，紧记，不能公开或丢失</span></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">我们需要生成大量的随机字节。这个时候您可以多做些琐事(像是敲打键盘、移动<br/> 鼠标、读写硬盘之类的)，这会让随机数字发生器有更好的机会获得足够的熵数。<br/> ++++++++++...++++++++++..++++++++</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">随机字节不够多。请再做一些其他的琐事，以使操作系统能搜集到更多的熵数！<br/> (还需要274字节)  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←运行一些的程序，以便在内存中获得更多随机数</span><br/> 我们需要生成大量的随机字节。这个时候您可以多做些琐事(像是敲打键盘、移动<br/> 鼠标、读写硬盘之类的)，这会让随机数字发生器有更好的机会获得足够的熵数。<br/> +++++++++++++++++++++++++.+++++.+++++.++++++++++.+++&lt;+++++..+++++^^^<br/> gpg: 密钥 <strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#dc143c;">A3942296</span></strong> 被标记为绝对信任  <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">←密钥ID</span><br/> 公钥和私钥已经生成并经签名。</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg: 正在检查信任度数据库<br/> gpg: 需要 3 份勉强信任和 1 份完全信任，PGP 信任模型<br/> gpg: 深度：0 有效性：  2 已签名：  0 信任度：0-，0q，0n，0m，0f，2u<br/> pub   1024D/A3942296 2008-12-19<br/> 密钥指纹 = E95E 1F77 6C4E 33BD 740C  19AB EEF9 A67E A394 2296<br/> uid                  Hyphen Wang (Use for GPG Encrypt) &lt;gpgencrypt@linuxfly.org&gt;<br/> sub   2048g/911E677B 2008-12-19</p>
</div>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff6600;"><strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">2.密钥的回收</strong></span></div>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">当您的密钥对生成之后，您应该立即做一个公钥回收证书，如果您忘记了您的私钥的口令或者您的私钥丢失或者被盗窃，您可以发布这个证书来声明以前的公钥不再有效。生成回收证书的选项是&quot;--gen-revoke&quot;。</div>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg --output revoke.asc --gen-revoke <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">mykeyID</span></p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">其中mykey 参数是可以表示的密钥标识，产生的回收证书放在revoke.asc文件里，一旦回收证书被发放，以前的证书就不能再被其他用户访问，因此以前的公钥也就失效了。</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff00ff;">PS:如果一旦决定撤销已经上传的公钥，就需要将该密钥的回收证书上传至密钥服务器完成回收工作。</span></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;"> </p>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg --keyserver <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">Server Address</span> --send-keys <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">mykeyID</span></p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;"><strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff6600;">3.密钥的上传</span></strong></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">当上述工作完成以后，为了让尽可能多的人获取您的公钥，您可以将公钥邮寄出去，或者贴在自己的个人主页上，当然还有一种更好的方法就是上传到全球性的密钥服务器，其他用户可以通过您提供的公钥ID来搜索并获得您的公钥。</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">通过如下命令可以将你的key发布到服务器上：</p>
</div>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">gpg --keyserver <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">Server Address</span> --send-keys <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">mykeyID</span></div>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff00ff;">PS:当然您也可以定义默认的服务器key server，一般安装好后的默认key server都是subkeys.pgp.net。你也可以通过修改.gnupg/gpg.conf中的keyserver信息来改变你的key server。</span></div>
</div>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff6600;">4.密钥的导出／导入</span></strong></div>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff6600;"><br/> </span></strong></div>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">我们通常需要导出公钥和私钥保存起来，当然公钥是可以满世界的泼洒，但是私钥请务必保存好，否则你的密钥对将会永久性的失去威力。</div>
<ul style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;list-style:none;padding:10px 0px 10px 20px;background:rgb(243, 243, 243);clear:both;">
<li style="padding:0px;border:0px;list-style:none;vertical-align:baseline;margin:0px;outline:0px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/li.png) no-repeat;font-size:13px;text-indent:1.3em;color:rgb(39, 39, 39);line-height:26px;">公钥的导出：</li>
</ul>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg -o <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">keyfilename</span> --export <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">mykeyID</span></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">如果没有mykeyID则是备份所有的公钥，<span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">-o</span>表示输出到文件keyfilename中，如果加上<span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">-a</span>的参数则输出文本格式( ASCII )的信息，否则输出的是二进制格式信息。</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<ul style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;list-style:none;padding:10px 0px 10px 20px;background:rgb(243, 243, 243);clear:both;">
<li style="padding:0px;border:0px;list-style:none;vertical-align:baseline;margin:0px;outline:0px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/li.png) no-repeat;font-size:13px;text-indent:1.3em;color:rgb(39, 39, 39);line-height:26px;">私钥的导出：</li>
</ul>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg -o <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">keyfilename </span>--export-secret-keys <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">mykeyID</span></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">如果没有mykeyID则是备份所有的私钥，<span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">-o</span>表示输出到文件keyfilename中，如果加上<span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">-a</span>的参数则输出文本格式的信息，否则输出的是二进制格式信息。</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<ul style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;list-style:none;padding:10px 0px 10px 20px;background:rgb(243, 243, 243);clear:both;">
<li style="padding:0px;border:0px;list-style:none;vertical-align:baseline;margin:0px;outline:0px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/li.png) no-repeat;font-size:13px;text-indent:1.3em;color:rgb(39, 39, 39);line-height:26px;">密钥的导入：</li>
</ul>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg --import <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;">filename</span></p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff00ff;">PS:用户可以使用gpg --list-keys命令查看是否成功导入了密钥。</span><br/> <strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"></strong></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;"><strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff6600;">5.加密解密和数字签名</span></strong></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">通过上述的密钥生成以及公钥分发后，加密和解密数据变得非常容易，用户可以通过使用该功能来达到安全地在网络上传输自己的隐密数据的目的。</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">如果用户patterson要给用户liyang发送一个加密文件，则他可以使用liyang的公钥加密这个文件，并且这个文件也只有liyang使用自己的密钥才可以解密查看。下面给出加解密的步骤：</p>
<ul style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;list-style:none;padding:10px 0px 10px 20px;background:rgb(243, 243, 243);clear:both;">
<li style="padding:0px;border:0px;list-style:none;vertical-align:baseline;margin:0px;outline:0px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/li.png) no-repeat;font-size:13px;text-indent:1.3em;color:rgb(39, 39, 39);line-height:26px;">用户patterson使用liyang的公钥加密文件test，使用下面的指令：</li>
</ul>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;"># gpg -e test</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">You did not specify a user ID. (you may use &quot;-r&quot;)</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">Enter the user ID. End with an empty line: liyang</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">Added 1024g/C50E455A 2006-01-02 &quot;liyang (hello) &lt; liyang@sina.com&gt;&quot;</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">这样，就可以将gpg.conf文件加密成test.gpg，一般用户是无法阅读的</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff00ff;">PS:当然你也可以直接指定使用哪个用户的公钥进行加密:</span></p>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg -e -r liyang test  (-r 表示指定用户)</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">还可以加上参数 -a 来输出ASCII编码的文件test.asc(test.gpg是二进制编码的，不可用文本读)</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg -ea -r liyang test</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<ul style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;list-style:none;padding:10px 0px 10px 20px;background:rgb(243, 243, 243);clear:both;">
<li style="padding:0px;border:0px;list-style:none;vertical-align:baseline;margin:0px;outline:0px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/li.png) no-repeat;font-size:13px;text-indent:1.3em;color:rgb(39, 39, 39);line-height:26px;">用户liyang 使用自己的私钥来解密该文件，如下所示：</li>
</ul>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;"># gpg -d test.gpg</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">You need a passphrase to unlock the secret key for</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">user: &quot;liyang (hello) &lt; liyang@sina.com&gt;&quot;</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">1024-bit ELG-E key, ID C50E455A, created 2006-01-02 (main key ID 378D11AF)</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">GnuPG提示用户，需要输入生成私钥使用的密码：</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">Enter passphrase:</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg: encrypted with 1024-bit ELG-E key, ID C50E455A, created 2006-01-02</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">&quot;liyang (hello) &lt; liyang@sina.com&gt;&quot;</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">PS:无论加密解密，都可以加上<span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">-o</span>参数来指定加密和解密后的输出文件，例如</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#888888;">#gpg <span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff0000;">-o </span>doc.gpg -er name doc<br/> 其中name是选择谁的公钥加密，即谁是文件的接收者。<br/> doc为要加密的文件，即原文件<br/> doc.gpg为命令执行后生成的加密的文件，这里要先指定好文件名</span></p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<ul style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;list-style:none;padding:10px 0px 10px 20px;background:rgb(243, 243, 243);clear:both;">
<li style="padding:0px;border:0px;list-style:none;vertical-align:baseline;margin:0px;outline:0px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/li.png) no-repeat;font-size:13px;text-indent:1.3em;color:rgb(39, 39, 39);line-height:26px;">对文件进行签名</li>
</ul>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#00ccff;">1、数字签名</span><br/> 命令格式：<br/> #gpg -o doc.sig -s doc<br/> 其中doc是原文件，doc.sig包含了原文件和签名，是二进制的。这个命令会要求你输入你的私钥的密码句。<br/> #gpg -o doc.sig -ser name doc<br/> 既签名又加密</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#00ccff;">2、文本签名</span><br/> #gpg -o doc.sig --clearsign doc<br/> 这样产生的doc.sig同样包含原文件和签名，其中签名是文本的，而原文件不变。</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#00ccff;">3、分离式签名</span><br/> #gpg -o doc.sig -ab doc<br/> doc.sig仅包括签名，分离式签名的意思是原文件和签名是分开的。<br/> b 表示分离式签名detach-sign</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#00ccff;">4、验证签名</span><br/> #gpg --verify doc.sig [doc]<br/> 验证之前必须导入文件作者的公钥，对于分离式签名，最后还要加上原文件，即后面的doc。</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<ul style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;list-style:none;padding:10px 0px 10px 20px;background:rgb(243, 243, 243);clear:both;">
<li style="padding:0px;border:0px;list-style:none;vertical-align:baseline;margin:0px;outline:0px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/li.png) no-repeat;font-size:13px;text-indent:1.3em;color:rgb(39, 39, 39);line-height:26px;">密匙签名和用户信任(进阶功能)</li>
</ul>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">尽管在理论上讲，具备了公匙和私匙就可以实现安全的信息通讯，但是在实际应用中，还必须对公匙进行有效确认。因为，确实存在伪造公匙信息的可能。</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">由此，在GPG中引入了一个复杂的信任系统，以帮助我们区分哪些密匙是真的，哪些密匙是假的。这个信任系统是基于密匙的，主要包括密匙签名。</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">当收到熟人的公匙并且GPG告知不存在任何实体可信信息附加于这个公匙后，首要的事情就是对这个密匙进行“指纹采样”（fingerprint）。例如，我们对来自mike的公匙进行了导入操作，并且GPG告知我们不存在这个密匙的附加可信信息，这时候，我们首先要做的工作就是对这个新密匙进行“指纹采样 ”，相关命令及执行情况如下：</p>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">$ gpg --fingerprint mike@hairnet.orgpub 1024D/4F03BD39 2001-01-15 Mike Socks (I'm WIRED) Key fingerprint = B121 5431 8DE4 E3A8 4AA7 737D 20BE 0DB8 4F03 BD39sub 1024g/FDBB477D 2001-01-15$</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">这样，就从密匙数据中生成了其指纹信息，并且应该是唯一的。然后，我们打电话给mike，确认两件事情。首先，他是否发送给我们了密匙；其次，他的公匙的指纹信息是什么。如果Mike确认了这两件事情，我们就可以确信这个密匙是合法的。接下来，我们对密匙进行签名操作，以表示这个密匙来自Mike而且我们对密匙的信任，相关命令及执行情况如下：</p>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">$ gpg --sign-key mike@hairnet.orgpub 1024D/4F03BD39 created: 2001-01-15 expires: neversub 1024g/FDBB477D created: 2001-01-15 expires: never(1) Mike Socks (I'm WIRED) pub 1024D/4F03BD39 created: 2001-01-15 expires: neverFingerprint = B121 5431 8DE4 E3A8 4AA7 737D 20BE 0DB8 4F03 BD39Mike Socks (I'm WIRED) Are you really sure that you want to sign this keywith your key: Ima User (I'm just ME) Really sign? yYou need a passphrase to unlock the secret key foruser: Ima User (I'm just ME) 1024-bit DSA key, ID D9BAC463, created 2001-01-03Enter passphrase:$</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">执行到此，使用我们的私匙完成了对Mike的公匙的签名操作，任何持有我们的公匙的人都可以查证签名确实属于我们自己。这个附加到Mike的公匙上的签名信息将随它环游Internet世界，我们使用个人信誉，也就是我们自己的私匙，保证了那个密匙确实属于Mike。这是一个多么感人的充满诚信的故事啊 <img alt=":-)" height="41" style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;height:auto;max-width:614px;" width="78"></img> 现实世界的人们是否应该从这严格的技术标准中反思些什么呢？</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">还是回到这里。获取附加于一个公匙上的签名信息列表的命令是：</p>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg --check-sigs mike@hairnet.org</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">签名列表越长，密匙的可信度越大。其实，正是签名系统本身提供了密匙查证功能。假设我们接收到一个签名为Mike的密匙，通过Mike的公匙，我们验证出签名确实属于Mike，那么我们就信任了这个密匙。推而广之，我们就可以信任Mike签名的任何密匙。</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">为了更加稳妥，GPG还引入了另一个附加功能：可信级别（trust level）。使用它，我们可以为我们拥有的任何密匙的所有者指定可信级别。例如，即使我们知道Mike的公匙是可信的，但是事实上我们不能信任Mike在对其他密匙签名时的判断；我们会想，Mike也许只对少数密匙进行了签名，但却没有好好地检查一遍。</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">设置可信级别的命令及执行情况如下：</p>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">$ gpg --edit-key mike@hairnet.orgpub 1024D/4F03BD39 created: 2001-01-15 expires: never trust: -/fsub 1024g/FDBB477D created: 2001-01-15 expires: never(1) Mike Socks (I'm WIRED) Command&gt; trust 1 = Don't know 2 = I do NOT trust 3 = I trust marginally 4 = I trust fully s = please show me more information m = back to the main menuYour decision? 2Command&gt; quit$</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">在命令编辑环境中执行trust，然后选择级别2（I do NOT trust），这样我们割断了任何信任链，使每个密匙都必须经过Mike的签名。</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;"><strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#ff6600;">6.删除密钥</span></strong></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">从私钥钥匙环里删除密钥：</p>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"># gpg --delete-secret-keys hyphenwang@redflag-linux.com<br/> gpg (GnuPG) 1.4.5; Copyright (C) 2006 Free Software Foundation, Inc.<br/> This program comes with ABSOLUTELY NO WARRANTY.<br/> This is free software, and you are welcome to redistribute it<br/>under certain conditions. See the file COPYING for details.<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;"></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">sec  1024D/A3942296 2008-12-19 Hyphen Wang (Use for GPG Encrypt) &lt;gpgencrypt@linuxfly.org&gt;</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">要从钥匙环里删除这把密钥吗？(y/N)y<br/> 这是一把私钥！――真的要删除吗？(y/N)y</p>
</div>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
</div>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">必须先删除私钥，然后才能删除公钥。<br/> 从公钥钥匙环里删除密钥：</p>
</div>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"># gpg --delete-keys hyphenwang@redflag-linux.com<br/> gpg (GnuPG) 1.4.5; Copyright (C) 2006 Free Software Foundation, Inc.<br/> This program comes with ABSOLUTELY NO WARRANTY.<br/> This is free software, and you are welcome to redistribute it<br/>under certain conditions. See the file COPYING for details.<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;"></p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">sec  1024D/A3942296 2008-12-19 Hyphen Wang (Use for GPG Encrypt) &lt;gpgencrypt@linuxfly.org&gt;</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">要从钥匙环里删除这把密钥吗？(y/N)y</p>
</div>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<h2 style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;font-weight:400;clear:both;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;"><strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;"><strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">三.对称加密:</strong></strong></span></h2>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">当然GPG同样具备普通的对称加密功能，这时候就不需要密钥，直接用密码加密即可（注意，这里的密码不一定是你私钥的密码，您大可以随意设定）</p>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">gpg -o doc.gpg -c doc</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－</p>
<h2 style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;font-weight:400;clear:both;"><span style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;color:#3366ff;"><strong style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">四.GPG常用参数:</strong></span></h2>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<div style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;margin:0px;padding:0px;background:transparent;">语法：gpg [选项] [文件名]<br/> 签字、检查、加密或解密<br/> 默认的操作依输入数据而定</div>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">指令：</p>
<blockquote style="border:1px solid rgb(229, 229, 229);outline:0px;font-size:13px;vertical-align:baseline;margin:0px;padding:0px 0px 0px 60px;background:url(http://www.alexgao.com/wp-content/themes/Mossight/images/blockquote.png) 0px 0px repeat-y scroll rgb(248, 248, 248);quotes:none;width:550px;color:rgb(24, 24, 24);"><span style="font-size:600%;quotes:none;color:rgb(204, 204, 204);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-50px;padding-top:8px;font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:Cochin, Georgia, 'Times New Roman', serif;">“</span>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">-s, --sign [文件名]           生成一份签字<br/> --clearsign [文件名]      生成一份明文签字<br/> -b, --detach-sign             生成一份分离的签字<br/> -e, --encrypt                 加密数据<br/> -c, --symmetric               仅使用对称加密<br/> -d, --decrypt                 解密数据(默认)<br/> --verify                  验证签字<br/> --list-keys               列出密钥<br/> --list-sigs               列出密钥和签字<br/> --check-sigs              列出并检查密钥签字<br/> --fingerprint             列出密钥和指纹<br/> -K, --list-secret-keys        列出私钥<br/> --gen-key                 生成一副新的密钥对<br/> --delete-keys             从公钥钥匙环里删除密钥<br/> --delete-secret-keys      从私钥钥匙环里删除密钥<br/> --sign-key                为某把密钥添加签字<br/> --lsign-key               为某把密钥添加本地签字<br/> --edit-key                编辑某把密钥或为其添加签字<br/> --gen-revoke              生成一份吊销证书<br/> --export                  导出密钥<br/> --send-keys               把密钥导出到某个公钥服务器上<br/> --recv-keys               从公钥服务器上导入密钥<br/> --search-keys             在公钥服务器上搜寻密钥<br/> --refresh-keys            从公钥服务器更新所有的本地密钥<br/> --import                  导入/合并密钥<br/> --card-status             打印卡状态<br/> --card-edit               更改卡上的数据<br/> --change-pin              更改卡的 PIN<br/> --update-trustdb          更新信任度数据库<br/> --print-md 算法 [文件]    使用指定的散列算法打印报文散列值</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">选项：</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;quotes:none;text-indent:2em;margin:0px 10px 10px;">-a, --armor                   输出经 ASCII 封装<br/> -r, --recipient 某甲          为收件者“某甲”加密<br/> -u, --local-user              使用这个用户标识来签字或解密<br/> -z N                          设定压缩等级为 N (0 表示不压缩)<br/> --textmode                使用标准的文本模式<br/> -o, --output                  指定输出文件<br/> -v, --verbose                 详细模式<br/> -n, --dry-run                 不做任何改变<br/> -i, --interactive             覆盖前先询问<br/> --openpgp                 行为严格遵循 OpenPGP 定义<br/> --pgp2                    生成与 PGP 2.x 兼容的报文</p>
<span style="font-size:13px;quotes:none;color:rgb(24, 24, 24);border-top-width:1px;border-top-style:solid;border-top-color:rgb(255, 255, 255);display:block;height:0px;margin-left:-4.6em;"></span></blockquote>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">(请参考在线说明以获得所有命令和选项的完整清单)</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">范例：</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">-se -r Bob [文件名]          为 Bob 这个收件人签字及加密<br/> --clearsign [文件名]         做出明文签字<br/> --detach-sign [文件名]       做出分离式签字<br/> --list-keys [某甲]           显示密钥<br/> --fingerprint [某甲]         显示指纹</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">-----------------------------------------------------------------------------------</p>
<p style="border:0px;outline:0px;font-size:100%;vertical-align:baseline;padding:0px;background:transparent;margin:20px 0px;text-indent:2em;">本文属Alexgao.com原创文章，转载请注明出处.</p>
</div>
</div>
							 						</div></div></div></div></div></div></div></div></div><br/></span>
</div></body></html> 