<html>
<head>
  <title>Git diff</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/275193; Windows/6.3.9600;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="14994"/>
<h1>Git diff</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2016/3/5 16:53</i></td></tr>
<tr><td><b>标签：</b></td><td><i>待看, 减藏</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.gitguys.com/topics/git-diff/"><i>http://www.gitguys.com/topics/git-diff/</i></a></td></tr>
</table>
</div>
<br/>

<div><span>待看技术文章<hr/><br/><div style="font-size: 16px"><div style="box-sizing:border-box;overflow-y:auto;overflow-x:hidden;background-color:rgb(255, 255, 255);"><div style="box-sizing:border-box;color:rgb(116, 116, 116);font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:13px;line-height:20px;font-family:'PT Sans', Arial, Helvetica, sans-serif;background-color:rgb(255, 255, 255);"><div style="box-sizing:border-box;overflow:visible;background-color:rgb(255, 255, 255);"><div style="box-sizing:border-box;background:rgb(255, 255, 255);background-color:rgb(255, 255, 255);"><div style="box-sizing:border-box;zoom:1;"><div style="box-sizing:border-box;float:left;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="border-top-style:solid;box-sizing:border-box;border-bottom-width:0px;border-top-width:0px;border-bottom-style:solid;border-color:#eae9e9;padding-bottom:20px;padding-top:20px;padding-left:0px;padding-right:0px;background-color:#ffffff;"><div style="box-sizing:border-box;zoom:1;"><span style="display:table;"> </span><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><a name="diff" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span><span style="color:rgb(30, 115, 190);"></span></a></p><h2 style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0em;margin-bottom:1.1em;color:rgb(51, 51, 51);font-family:'Antic Slab', Arial, Helvetica, sans-serif;font-weight:400;font-size:18px;line-height:27px;"><span style="box-sizing:border-box;">git diff</span></h2><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">让我们休息了一会儿，看看如何使用 <b style="box-sizing:border-box;">git diff</b> 命令来显示你的工作目录, index和最新的commit文件版本之间的差异. 这个 3 种你可能要使用到的 <b style="box-sizing:border-box;">git diff</b> 的类型为:</p><ul style="box-sizing:border-box;"><li style="box-sizing:border-box;"><b style="box-sizing:border-box;">git diff</b>: 显示您的工作目录和index之间的差异.</li><li style="box-sizing:border-box;"><b style="box-sizing:border-box;">git diff –<span style="box-sizing:border-box;">cached</span></b>: 显示index和最近的commit之间的差异.</li><li style="box-sizing:border-box;"><b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git diff HEAD</span></b>: 显示您的工作目录和最新的commit之间的差异.</li></ul><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">本示例从前面文章结束的地方开始： <a href="http://www.gitguys.com/topics/whats-in-the-index-whats-changed" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span>Index中包含什么? 有什么变化? git status和 git ls-files<span style="color:rgb(30, 115, 190);"></span></a>:</p><ul style="box-sizing:border-box;"><li style="box-sizing:border-box;">Index和最新commit的版本的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 文件中都只包含一行:</li></ul><pre style="box-sizing:border-box;"><span style="box-sizing:border-box;">This is the README file</span>.</pre><ul style="box-sizing:border-box;"><li style="box-sizing:border-box;">这个 <i style="box-sizing:border-box;">工作目录</i> 版本的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 文件较新，多了一行:<pre style="box-sizing:border-box;"><span style="box-sizing:border-box;">This is the README file</span>.
<span style="box-sizing:border-box;">One more line</span>.</pre><h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:1em;font-family:'Antic Slab', Arial, Helvetica, sans-serif;font-weight:400;font-size:16px;line-height:24px;color:rgb(51, 51, 51);"><span style="box-sizing:border-box;">git diff: 工作目录和index之间的差异</span></h3><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">这个 <b style="box-sizing:border-box;">git diff</b> 命令用来显示工作目录和index之间的区别:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;">git diff</b>
<span style="box-sizing:border-box;">diff --git a/README b/README
index bccdfbd..b0ed415</span> 100644
--- <span style="box-sizing:border-box;">a/README</span>
+++ <span style="box-sizing:border-box;">b/README
@@</span> -1 +1,2 <span style="box-sizing:border-box;">@@
 This is the README file</span>.
+<span style="box-sizing:border-box;">One more line</span>.</pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">上面显示了工作目录和index中的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 版本存在着差异.</p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">如果你有带界面的工具，如 <b style="box-sizing:border-box;">kdiff3</b> ，安装在系统上, 您可以通过这个命令以图形化的方式查看差异： <b style="box-sizing:border-box;">git difftool</b>:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;">git difftool</b>

<span style="box-sizing:border-box;">Viewing</span>: <span style="box-sizing:border-box;">'README'
Hit return to launch 'kdiff3'</span>:</pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">将会出现下面的窗口，其中显示了index中的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 文件 (在左边) 与工作目录中的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 文件一致 (在右边):</p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><img src="Git diff_files/Image.png" type="image/png" alt="difftool.png" border="1" height="240" style="box-sizing:border-box;border-style:none;vertical-align:top;max-width:100%;height:auto;border:1px solid black;" title="Git difftool" width="786"/></p><h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:1em;font-family:'Antic Slab', Arial, Helvetica, sans-serif;font-weight:400;font-size:16px;line-height:24px;color:rgb(51, 51, 51);"><span style="box-sizing:border-box;">git diff –<span style="box-sizing:border-box;">cached</span>: index和最新的commit之间的差异</span></h3><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">新版本的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 文件的版本在index中与在最新一次的commit中完全相同, 所以 <b style="box-sizing:border-box;">git diff –<span style="box-sizing:border-box;">cached</span></b> 显示两者没有区别:</p><pre style="box-sizing:border-box;"> $ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git diff --cached</span></b></pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><img src="Git diff_files/Image [1].png" type="image/png" alt="diffs" border="1" height="618" style="box-sizing:border-box;border-style:none;vertical-align:top;max-width:100%;height:auto;border:1px solid black;" title="Git Diff 流程图" width="800"/></p><h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:1em;font-family:'Antic Slab', Arial, Helvetica, sans-serif;font-weight:400;font-size:16px;line-height:24px;color:rgb(51, 51, 51);"><span style="box-sizing:border-box;"><span style="box-sizing:border-box;">git diff HEAD</span>: 显示工作目录和最新commit之间的差异</span></h3><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git diff HEAD</span></b> 显示工作目录和最新commit之间的差异:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git diff HEAD</span></b>
<span style="box-sizing:border-box;">diff --git a/README b/README
index bccdfbd..b0ed415</span> 100644
--- <span style="box-sizing:border-box;">a/README</span>
+++ <span style="box-sizing:border-box;">b/README
@@</span> -1 +1,2 <span style="box-sizing:border-box;">@@
 This is the README file</span>.
 +<span style="box-sizing:border-box;">One more line</span>.</pre><h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:1em;font-family:'Antic Slab', Arial, Helvetica, sans-serif;font-weight:400;font-size:16px;line-height:24px;color:rgb(51, 51, 51);"><span style="box-sizing:border-box;">尝试commit而不更改index</span></h3><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">命令 <b style="box-sizing:border-box;"><a href="http://www.gitguys.com/topics/git-object-commit/?lang=zh" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span>git commit<span style="color:rgb(30, 115, 190);"></span></a></b> 的任务是要将index的当前状态保存到最新的commit中.</p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">然而, 如果我们尝试使用 <b style="box-sizing:border-box;">git commit</b> ，但index和最新的commit却完全相同时 (在我们的示例中, 自使用完下面的命令后便没有对index做任何的修改： <b style="box-sizing:border-box;">git commit</b>), 我们会得到一个错误:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;">git commit</b>
# <span style="box-sizing:border-box;">On branch master</span>
# <span style="box-sizing:border-box;">Changed but not updated</span>:
#   (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git add</span> ...&quot; <span style="box-sizing:border-box;">to update what will be committed</span>)
#   (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git checkout</span> -- ...&quot; <span style="box-sizing:border-box;">to discard changes in working directory</span>)
#
#       <span style="box-sizing:border-box;">modified</span>:   <span style="box-sizing:border-box;">README</span>
#
<i style="box-sizing:border-box;"><span style="box-sizing:border-box;">no changes added to commit</span> (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git add</span>&quot; <span style="box-sizing:border-box;">and/or</span> &quot;git commit-a&quot;),</i></pre><h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:1em;font-family:'Antic Slab', Arial, Helvetica, sans-serif;font-weight:400;font-size:16px;line-height:24px;color:rgb(51, 51, 51);"><span style="box-sizing:border-box;">更新index</span></h3><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">下面的命令将当前目录和其所有子目录中的所有文件复制至 (在我们的例子中只有一个文件) 到index中:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git add</span> .</b></pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">现在最新版的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 已从工作目录被复制到对象存储区，index也已更新为引用新版本的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b>:</p></li></ul> <span style="box-sizing:border-box;display:inline-block;z-index:1;position:relative;max-width:100%;"> <img alt="" height="0" style="box-sizing:border-box;border-style:none;vertical-align:top;max-width:100%;height:auto;" width="0"></img></span><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><img src="Git diff_files/Image [2].png" type="image/png" alt="index updated" border="1" height="576" style="box-sizing:border-box;border-style:none;vertical-align:top;max-width:100%;height:auto;border:1px solid black;" width="748"/></p><ul style="box-sizing:border-box;list-style-type:square;"><li style="box-sizing:border-box;">这个 <b style="box-sizing:border-box;">git diff</b> 的输出显示工作目录和index之间不存在任何差别:<pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;">git diff</b></pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">但实际上index和最新的commit之间是 <i style="box-sizing:border-box;">存在</i> 差异的, 因为 <b style="box-sizing:border-box;">git commit</b> 尚未完成:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git diff --cached</span></b>
<span style="box-sizing:border-box;">diff --git a/README b/README
index bccdfbd..b0ed415</span> 100644
--- <span style="box-sizing:border-box;">a/README</span>
+++ <span style="box-sizing:border-box;">b/README
@@</span> -1 +1,2 <span style="box-sizing:border-box;">@@
 This is the README file</span>.
+<span style="box-sizing:border-box;">One more line</span>.</pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">这个 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git status</span></b> 命令与 <b style="box-sizing:border-box;">git diff –<span style="box-sizing:border-box;">cached</span></b> 结果一致，都表明 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 文件已被更改:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git ls-files</span></b>
<span style="box-sizing:border-box;">README</span>
$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git status</span></b>
# <span style="box-sizing:border-box;">On branch master</span>
# <span style="box-sizing:border-box;">Changes to be committed</span>:
#   (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git reset HEAD</span> ...&quot; <span style="box-sizing:border-box;">to unstage</span>)
#
#       <span style="box-sizing:border-box;">modified</span>:   <span style="box-sizing:border-box;">README</span>
#
$ <b style="box-sizing:border-box;">git commit-m &quot;<span style="box-sizing:border-box;">Added a second line.</span>&quot;</b>
[<span style="box-sizing:border-box;">master bb937de</span>] <span style="box-sizing:border-box;">Added a second line</span>.
 <span style="box-sizing:border-box;">Committer</span>: Tim Flagg &lt;me@gitguys.com&gt;
 1 <span style="box-sizing:border-box;">files changed</span>, 1 <span style="box-sizing:border-box;">insertions</span>(+), 0 <span style="box-sizing:border-box;">deletions</span>(-)</pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">当index已经被commit到存储库中后, <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git status</span></b> 再次显示没有任何东西需要commit:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git ls-files</span></b>
<span style="box-sizing:border-box;">README</span>
$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git status</span></b>
# <span style="box-sizing:border-box;">On branch master
nothing to commit</span> (<span style="box-sizing:border-box;">working directory clean</span>)</pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">这个 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git ls-files</span></b> 命令显示 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 仍然在index中: <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 可能会被删除，但绝不是用 <b style="box-sizing:border-box;">git commit</b>.</p><h3 style="box-sizing:border-box;margin-top:1em;margin-bottom:1em;font-family:'Antic Slab', Arial, Helvetica, sans-serif;font-weight:400;font-size:16px;line-height:24px;color:rgb(51, 51, 51);"><span style="box-sizing:border-box;">再次更改README</span></h3><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">我们将再修改 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 一次:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">echo Another line added</span>. &gt;&gt; <span style="box-sizing:border-box;">README</span></b>
$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git ls-files</span></b>
<span style="box-sizing:border-box;">README</span>
$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git status</span></b>
# <span style="box-sizing:border-box;">On branch master</span>
# <span style="box-sizing:border-box;">Changed but not updated</span>:
#   (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git add</span> ...&quot; <span style="box-sizing:border-box;">to update what will be committed</span>)
#   (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git checkout</span> -- ...&quot; <span style="box-sizing:border-box;">to discard changes in working directory</span>)
#
#       <span style="box-sizing:border-box;">modified</span>:   <span style="box-sizing:border-box;">README</span>
#
<span style="box-sizing:border-box;">no changes added to commit</span> (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git add</span>&quot; <span style="box-sizing:border-box;">and/or</span> &quot;git commit-a&quot;)</pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">这一次我们使用 <b style="box-sizing:border-box;">-一个</b> 参数加到 <b style="box-sizing:border-box;">git commit</b> 命令中，这将自动添加工作目录和index之间存在差异的任何文件: 在这种情况下, 修改后版本的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 文件被添加到index中:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git commit -a -m</span>&quot;<span style="box-sizing:border-box;">Another commit.</span>&quot;</b>
[<span style="box-sizing:border-box;">master 7e2d129</span>] <span style="box-sizing:border-box;">Another commit</span>.
 <span style="box-sizing:border-box;">Committer</span>: Tim Flagg &lt;me@gitguys.com&gt;
 1 <span style="box-sizing:border-box;">files changed</span>, 1 <span style="box-sizing:border-box;">insertions</span>(+), 0 <span style="box-sizing:border-box;">deletions</span>(-)
$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git ls-files</span></b>
<span style="box-sizing:border-box;">README</span>
$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git status</span></b>
# <span style="box-sizing:border-box;">On branch master
nothing to commit</span> (<span style="box-sizing:border-box;">working directory clean</span>)</pre><h2 style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0em;margin-bottom:1.1em;color:rgb(51, 51, 51);font-family:'Antic Slab', Arial, Helvetica, sans-serif;font-weight:400;font-size:18px;line-height:27px;"><span style="box-sizing:border-box;">工作目录, index和最新commit都不同</span></h2><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">我们接下来添加另一行到 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 文件，并将更新后的文件添加到git index中:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">echo line4 added</span> &gt;&gt; <span style="box-sizing:border-box;">README</span></b>
$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git add README</span></b>
$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git status</span></b>
# <span style="box-sizing:border-box;">On branch master</span>
# <span style="box-sizing:border-box;">Changes to be committed</span>:
#   (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git reset HEAD</span> ...&quot; <span style="box-sizing:border-box;">to unstage</span>)
#
#   <span style="box-sizing:border-box;">modified</span>:   <span style="box-sizing:border-box;">README</span>
#</pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">现在已经将最新版本的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 添加到index中, 让我们暂时先 <i style="box-sizing:border-box;">不是</i> 执行 <b style="box-sizing:border-box;">git commit</b> <span style="box-sizing:border-box;">and see what happens when</span>:</p><ul style="box-sizing:border-box;"><li style="box-sizing:border-box;">我们修改工作目录中的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 文件一致.</li><li style="box-sizing:border-box;">但不执行 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git add README</span></b>:</li></ul><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">echo line5 added</span> &gt;&gt; <span style="box-sizing:border-box;">README</span></b>
$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git status</span></b>
# <span style="box-sizing:border-box;">On branch master</span>
# <span style="box-sizing:border-box;">Changes to be committed</span>:
#   (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git reset HEAD</span> ...&quot; <span style="box-sizing:border-box;">to unstage</span>)
#
#   <span style="box-sizing:border-box;">modified</span>:   <span style="box-sizing:border-box;">README</span>
#
# <span style="box-sizing:border-box;">Changed but not updated</span>:
#   (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git add</span> ...&quot; <span style="box-sizing:border-box;">to update what will be committed</span>)
#   (<span style="box-sizing:border-box;">use</span> &quot;<span style="box-sizing:border-box;">git checkout</span> -- ...&quot; <span style="box-sizing:border-box;">to discard changes in working directory</span>)
#
#   <span style="box-sizing:border-box;">modified</span>:   <span style="box-sizing:border-box;">README</span>
#</pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">上面的示例告诉我们:</p><ul style="box-sizing:border-box;"><li style="box-sizing:border-box;">“<i style="box-sizing:border-box;"><span style="box-sizing:border-box;">Changes to be committed</span></i>“: 新版本的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 已经通过 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git add</span></b> 命令, 较早前.</li><li style="box-sizing:border-box;">“<i style="box-sizing:border-box;"><span style="box-sizing:border-box;">Changed but not updated</span></i>:” 新版本的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 在工作目录中已被更改, 但所做的更改没有被添加到index中， <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git add README</span></b> 命令并未执行.</li></ul><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 在工作目录中已经包含 5 行，内容为:</p><pre style="box-sizing:border-box;"><span style="box-sizing:border-box;">This is the README file</span>.
<span style="box-sizing:border-box;">One more line</span>.
<span style="box-sizing:border-box;">Another line added</span>.
<span style="box-sizing:border-box;">line4 added
line5 added</span></pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 在index中有 4 行，内容为:</p><pre style="box-sizing:border-box;"><span style="box-sizing:border-box;">This is the README file</span>.
<span style="box-sizing:border-box;">One more line</span>.
<span style="box-sizing:border-box;">Another line added</span>.
<span style="box-sizing:border-box;">line4 added</span></pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 在最近的commit中有 3 行，内容为:</p><pre style="box-sizing:border-box;"><span style="box-sizing:border-box;">This is the README file</span>.
<span style="box-sizing:border-box;">One more line</span>.
<span style="box-sizing:border-box;">Another line added</span>.</pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">看起来像下面这样:</p></li></ul> <span style="box-sizing:border-box;display:inline-block;z-index:1;position:relative;max-width:100%;"> <img alt="" height="0" style="box-sizing:border-box;border-style:none;vertical-align:top;max-width:100%;height:auto;" width="0"></img></span><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><img src="Git diff_files/Image [3].png" type="image/png" alt="all different" border="1" height="579" style="box-sizing:border-box;border-style:none;vertical-align:top;max-width:100%;height:auto;" width="750"/></p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">让我们看看的工作目录和index之间的差异:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;">git diff</b>
<span style="box-sizing:border-box;">diff --git a/README b/README
index e821a27..c64b1f6</span> 100644
--- <span style="box-sizing:border-box;">a/README</span>
+++ <span style="box-sizing:border-box;">b/README
@@</span> -2,3 +2,4 <span style="box-sizing:border-box;">@@ This is the README file</span>.
 <span style="box-sizing:border-box;">One more line</span>.
 <span style="box-sizing:border-box;">Another line added</span>.
 <span style="box-sizing:border-box;">line4 added
+line5 added</span></pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">上面显示 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 在index中的版本将需要添加行: <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">line5 added</span></b> 才能和这个一样： <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 文件一致. 换一种说法， <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 在工作目录中的版本多了这一行: <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">line5 added</span></b> .</p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">这个 <b style="box-sizing:border-box;">git difftool</b> 会调用 <b style="box-sizing:border-box;">kdiff3</b> 产生）看起来像下面这样 (index版本在左边和右边的是工作目录版本):</p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><img src="Git diff_files/Image [4].png" type="image/png" alt="diff2" border="1" height="235" style="box-sizing:border-box;border-style:none;vertical-align:top;max-width:100%;height:auto;" width="750"/></p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">这里显示了index和最新的commit之间的差异:</p><pre style="box-sizing:border-box;">$ <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">git diff --cached</span></b>
<span style="box-sizing:border-box;">diff --git a/README b/README
index 953937c..e821a27</span> 100644
--- <span style="box-sizing:border-box;">a/README</span>
+++ <span style="box-sizing:border-box;">b/README
@@</span> -1,3 +1,4 <span style="box-sizing:border-box;">@@
 This is the README file</span>.
 <span style="box-sizing:border-box;">One more line</span>.
 <span style="box-sizing:border-box;">Another line added</span>.
+<span style="box-sizing:border-box;">line4 added</span></pre><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">以上显示了 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 在最近commit中的版本需要添加行: <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">line4 added</span></b> 才能和这个一样： <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 到 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">index</span></b>.</p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">或者, 以图形方式, <b style="box-sizing:border-box;">git difftool –<span style="box-sizing:border-box;">cached</span></b> 显示以下内容 (commit的最新版本在左边，右边是index中的版本):</p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><img src="Git diff_files/Image [5].png" type="image/png" alt="diff3" border="1" height="235" style="box-sizing:border-box;border-style:none;vertical-align:top;max-width:100%;height:auto;" width="750"/></p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">请注意 diff 显示的 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">README</span></b> 在index中有 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">line4 added</span></b> 但没有 <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">line5 added</span></b>. 这是由于: <b style="box-sizing:border-box;"><span style="box-sizing:border-box;">line5 added</span></b> 仅仅被加到工作目录的版本, 但 <b style="box-sizing:border-box;">git diff –<span style="box-sizing:border-box;">cached</span></b> 显示index和最近commit之间的差异，根本不会查看工作目录.</p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">接下来: <a href="http://www.gitguys.com/topics/commits-and-referring-to-commits" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span>Commit和指向Commit<span style="color:rgb(30, 115, 190);"></span></a><br style="box-sizing:border-box;"/> 上一篇: <a href="http://www.gitguys.com/topics/whats-in-the-index-whats-changed" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span>Index中包含什么? 有什么变化? git status和 git ls-files<span style="color:rgb(30, 115, 190);"></span></a></p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;">相关文章:</p><p style="box-sizing:border-box;margin:0px 0px 20px;margin-top:0px;margin-bottom:20px;"><a href="http://www.gitguys.com/topics/whats-the-deal-with-the-git-index" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span>什么是Git Index?<span style="color:rgb(30, 115, 190);"></span></a><br style="box-sizing:border-box;"/> <a href="http://www.gitguys.com/topics/the-git-object-model-starting-with-the-blob" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span>Git Blob对象<span style="color:rgb(30, 115, 190);"></span></a><br style="box-sizing:border-box;"/> <a href="http://www.gitguys.com/topics/git-object-tree" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span>Git Tree对象<span style="color:rgb(30, 115, 190);"></span></a><br style="box-sizing:border-box;"/> <a href="http://www.gitguys.com/topics/git-object-commit" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span>Git Commit对象<span style="color:rgb(30, 115, 190);"></span></a><br style="box-sizing:border-box;"/> <a href="http://www.gitguys.com/topics/git-object-tag" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span>Git Tag对象<span style="color:rgb(30, 115, 190);"></span></a><br style="box-sizing:border-box;"/> <a href="http://www.gitguys.com/topics/all-git-object-types-blob-tree-commit-and-tag" style="box-sizing:border-box;text-decoration:none;color:rgb(30, 115, 190);"><span style="color:rgb(30, 115, 190);"></span>Git对象类型: <span style="box-sizing:border-box;">Blob</span>, Tree, Commit和Tag<span style="color:rgb(30, 115, 190);"></span></a></p><span style="display:table;clear:both;"> </span></div></div></div></div></div></div></div></div></div></div></div><br/></span>
</div></body></html> 